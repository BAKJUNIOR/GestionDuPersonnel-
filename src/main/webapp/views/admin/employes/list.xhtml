<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<ui:composition template="/resources/tpl/admin.xhtml">


    <ui:define name="title">
        <title>Liste des employés</title>
    </ui:define>
    <ui:define name="main">



        <p:outputPanel id="container" styleClass="container">


            <h:form id="employesTable">
                <div class="card">
                    <p:dataTable var="employe" value="#{employeController.employes}" paginator="true"
                                 rows="8" paginatorPosition="bottom" filterEvent="keyup" filterDelay="200"
                                 lazy="false" currentPageReportTemplate="({currentPage} de {totalPages}, Total de {totalRecords} employés)">

                        <p:column headerText="Code" filterBy="#{employe.idEmploye}" filterMatchMode="contains">
                            <h:outputText value="#{employe.idEmploye}" />
                        </p:column>

                        <p:column headerText="Nom" filterBy="#{employe.nom}" filterMatchMode="contains">
                            <h:outputText value="#{employe.nom}" />
                        </p:column>

                        <p:column headerText="Adresse" filterBy="#{employe.adresse}" filterMatchMode="contains">
                            <h:outputText value="#{employe.adresse}" />
                        </p:column>

                        <p:column headerText="N° Téléphone" filterBy="#{employe.numeroTelephone}" filterMatchMode="contains">
                            <h:outputText value="#{employe.numeroTelephone}" />
                        </p:column>

                        <p:column headerText="Couriel" filterBy="#{employe.courriel}" filterMatchMode="contains">
                            <h:outputText value="#{employe.courriel}" />
                        </p:column>

                        <p:column headerText="Poste" filterBy="#{employe.poste}" filterMatchMode="contains">
                            <h:outputText value="#{employe.poste}" />
                        </p:column>

                        <p:column headerText="Salaire" filterBy="#{employe.salaire}" filterMatchMode="contains">
                            <h:outputText value="#{employe.salaire}" />
                        </p:column>

                        <p:column headerText="Actions">
                            <p:commandButton icon="pi pi-pencil" title="Modifier"
                                             update=":mainForm:employesTable" style="margin-right: 5px"/>

                            <p:commandButton icon="pi pi-trash" title="Supprimer"
                                             actionListener="#{employeController.deleteEmploye}"
                                             update=":mainForm:employesTable "
                                             style="color: red;"
                                             oncomplete="PF('deleteDialog').hide()">
                                <f:setPropertyActionListener value="#{employe}" target="#{employeController.selectedEmploye}" />
                            </p:commandButton>


                        </p:column>

                    </p:dataTable>

                </div>
            </h:form>


        </p:outputPanel>
    </ui:define>
</ui:composition>
</html>

